var V=Object.defineProperty;var _=(i,o,r)=>o in i?V(i,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[o]=r;var D=(i,o,r)=>(_(i,typeof o!="symbol"?o+"":o,r),r),I=(i,o,r)=>{if(!o.has(i))throw TypeError("Cannot "+r)};var a=(i,o,r)=>(I(i,o,"read from private field"),r?r.call(i):o.get(i)),p=(i,o,r)=>{if(o.has(i))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(i):o.set(i,r)},f=(i,o,r,w)=>(I(i,o,"write to private field"),w?w.call(i,r):o.set(i,r),r);var y=(i,o,r)=>(I(i,o,"access private method"),r);(function(i,o){typeof exports=="object"&&typeof module!="undefined"?module.exports=o():typeof define=="function"&&define.amd?define(o):(i=typeof globalThis!="undefined"?globalThis:i||self,i.Scrollspy=o())})(this,function(){var m,h,x,d,C,B,E,R,b,$,S,H,O,N,A,T;"use strict";const i=[],o={components:[],plugins:[],prefix:"ax",mode:""},r=s=>o.components.find(e=>e.name===s).class,w=()=>{const s=o.components.filter(t=>t.dataDetection),e=o.plugins.filter(t=>t.dataDetection);return[...s,...e].map(t=>t.name)},U=(s,e)=>{if(!s.name||!s.class){console.error(`[Axentix] Error registering ${e} : Missing required parameters.`);return}if(o[e].some(t=>t.name===s.name)){console.error(`[Axentix] Error registering ${e} : Already exist.`);return}s.autoInit&&(s.autoInit.selector=s.autoInit.selector+=":not(.no-axentix-init)"),o[e].push(s)},z=s=>{U(s,"components")},F=s=>s.replace(/[\w]([A-Z])/g,e=>e[0]+"-"+e[1]).toLowerCase(),Y=(s,e="")=>{const t=F(s);return e?e+"-"+t:t},P=(s,e,t,n,l="")=>{const c=e[0].toUpperCase()+e.slice(1).toLowerCase();w().includes(c)&&t!=="Collapsible"&&c!=="Sidenav"&&(s[e]=r(c).getDefaultOptions());const u=l?l+"-"+e:e,g=q(s[e],t,n,u);if(!(Object.keys(g).length===0&&s.constructor===Object))return g},q=(s,e,t,n="")=>Object.keys(s).reduce((l,c)=>{if(typeof s[c]=="object"&&s[c]!==null){const u=P(s,c,e,t,n);u&&(l[c]=u)}else if(s[c]!==null){const u="data-"+e.toLowerCase()+"-"+Y(c,n);if(t.hasAttribute(u)){const g=t.getAttribute(u);l[c]=typeof s[c]=="number"?Number(g):g,typeof s[c]=="boolean"&&(l[c]=g==="true")}}return l},{}),W=(s,e)=>{const t=Object.assign({},r(s).getDefaultOptions());return q(t,s,e)},X=()=>{document.querySelectorAll("[data-ax]").forEach(e=>{let t=e.dataset.ax;if(t=t[0].toUpperCase()+t.slice(1).toLowerCase(),!w().includes(t)){console.error(`[Axentix] Error: ${t} component doesn't exist. 
 Did you forget to register him ?`,e);return}try{const n=r(t);new n(`#${e.id}`)}catch(n){console.error("[Axentix] Data: Unable to load "+t,n)}})},Z=()=>{try{new Axentix.Axentix("all")}catch(s){console.error("[Axentix] Unable to auto init.",s)}};document.addEventListener("DOMContentLoaded",()=>{document.documentElement.dataset.axentix&&Z(),X()});const M=(...s)=>s.reduce((e,t)=>{for(let n in t)e[n]=typeof t[n]=="object"&&t[n]!==null?M(e[n],t[n]):t[n];return e},{}),G=(s,e,t)=>M(r(s).getDefaultOptions(),W(s,t),e),L=(s,e,t)=>{const n=new CustomEvent("ax."+e,{detail:t||{},bubbles:!0});s.dispatchEvent(n)},J=s=>{const e=i.find(t=>t.type!=="Toast"&&"#"+t.instance.el.id===s);return e?e.instance:!1};class K{constructor(){D(this,"el")}removeListeners(){}setupListeners(){}setup(){}preventDbInstance(e){if(e&&J(e))throw new Error(`Instance already exist on ${e}`)}sync(){L(this.el,"component.sync"),this.removeListeners(),this.setupListeners()}reset(){L(this.el,"component.reset"),this.removeListeners(),this.setup()}destroy(){L(this.el,"component.destroy"),this.removeListeners();const e=i.findIndex(t=>t.instance.el.id===this.el.id);i.splice(e,1)}}const Q={offset:200,linkSelector:"a",classes:"active",auto:{enabled:!1,classes:"",selector:""}};class k extends K{constructor(t,n){super();p(this,C);p(this,E);p(this,b);p(this,S);p(this,O);p(this,A);D(this,"options");p(this,m,void 0);p(this,h,void 0);p(this,x,void 0);p(this,d,void 0);try{this.preventDbInstance(t),i.push({type:"ScrollSpy",instance:this}),this.el=document.querySelector(t),this.options=G("ScrollSpy",n,this.el),this.setup()}catch(l){console.error("[Axentix] ScrollSpy init error",l)}}setup(){L(this.el,"scrollspy.setup"),this.options.auto.enabled?y(this,E,R).call(this):y(this,C,B).call(this),typeof this.options.classes=="string"&&(this.options.classes=this.options.classes.split(" ")),f(this,m,""),this.setupListeners(),y(this,A,T).call(this)}setupListeners(){f(this,h,y(this,A,T).bind(this)),window.addEventListener("scroll",a(this,h)),window.addEventListener("resize",a(this,h))}removeListeners(){window.removeEventListener("scroll",a(this,h)),window.removeEventListener("resize",a(this,h)),f(this,h,void 0)}}return m=new WeakMap,h=new WeakMap,x=new WeakMap,d=new WeakMap,C=new WeakSet,B=function(){f(this,x,Array.from(this.el.querySelectorAll(this.options.linkSelector))),f(this,d,a(this,x).map(t=>document.querySelector(t.getAttribute("href"))))},E=new WeakSet,R=function(){f(this,d,Array.from(document.querySelectorAll(this.options.auto.selector))),f(this,x,a(this,d).map(t=>{const n=document.createElement("a");return n.className=this.options.auto.classes,n.setAttribute("href","#"+t.id),n.innerHTML=t.innerHTML,this.el.appendChild(n),n}))},b=new WeakSet,$=function(){const t=window.scrollY,n=window.scrollX,l=window.innerWidth,c=window.innerHeight,u=t+this.options.offset;return c+t>=document.body.offsetHeight-2?a(this,d)[a(this,d).length-1]:a(this,d).find(g=>{const v=g.getBoundingClientRect();return v.top+t>=t&&v.left+n>=n&&v.right<=l&&v.bottom<=c&&v.top+t<=u})},S=new WeakSet,H=function(){!a(this,m)||this.options.classes.forEach(t=>a(this,m).classList.remove(t))},O=new WeakSet,N=function(){const t=window.scrollY;return a(this,d).reduce((n,l)=>{const c=l.getBoundingClientRect().top+t,u=n.getBoundingClientRect().top+t;return c>t+this.options.offset?n:Math.abs(c-t)<Math.abs(u-t)?l:n})},A=new WeakSet,T=function(){let t=y(this,b,$).call(this);t||(t=y(this,O,N).call(this));const n=a(this,x).find(l=>l.getAttribute("href").split("#")[1]===t.id);n!==a(this,m)&&(L(this.el,"scrollspy.update"),y(this,S,H).call(this),this.options.classes.forEach(l=>n.classList.add(l)),f(this,m,n))},D(k,"getDefaultOptions",()=>Q),z({class:k,name:"ScrollSpy",dataDetection:!0,autoInit:{enabled:!0,selector:".scrollspy"}}),k});
