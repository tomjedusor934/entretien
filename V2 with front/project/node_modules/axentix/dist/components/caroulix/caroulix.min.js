var qt=Object.defineProperty;var Ft=(l,r,c)=>r in l?qt(l,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):l[r]=c;var K=(l,r,c)=>(Ft(l,typeof r!="symbol"?r+"":r,c),c),rt=(l,r,c)=>{if(!r.has(l))throw TypeError("Cannot "+c)};var e=(l,r,c)=>(rt(l,r,"read from private field"),c?c.call(l):r.get(l)),a=(l,r,c)=>{if(r.has(l))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(l):r.set(l,c)},o=(l,r,c,g)=>(rt(l,r,"write to private field"),g?g.call(l,c):r.set(l,c),c),ht=(l,r,c,g)=>({set _(Q){o(l,r,Q,c)},get _(){return e(l,r,g)}}),h=(l,r,c)=>(rt(l,r,"access private method"),c);(function(l,r){typeof exports=="object"&&typeof module!="undefined"?module.exports=r():typeof define=="function"&&define.amd?define(r):(l=typeof globalThis!="undefined"?globalThis:l||self,l.Caroulix=r())})(this,function(){var C,b,d,T,S,D,N,O,x,X,A,E,I,R,$,k,P,m,H,U,v,Y,f,V,xt,_,gt,B,lt,y,M,q,nt,j,mt,tt,yt,et,Lt,it,bt,st,Et,W,ct,Z,dt,G,ut,F,ot,J,pt;"use strict";var l="";const r=[],c={components:[],plugins:[],prefix:"ax",mode:""},g=n=>c.components.find(s=>s.name===n).class,Q=()=>{const n=c.components.filter(t=>t.dataDetection),s=c.plugins.filter(t=>t.dataDetection);return[...n,...s].map(t=>t.name)},It=(n,s)=>{if(!n.name||!n.class){console.error(`[Axentix] Error registering ${s} : Missing required parameters.`);return}if(c[s].some(t=>t.name===n.name)){console.error(`[Axentix] Error registering ${s} : Already exist.`);return}n.autoInit&&(n.autoInit.selector=n.autoInit.selector+=":not(.no-axentix-init)"),c[s].push(n)},wt=n=>{It(n,"components")},Ct=n=>n.replace(/[\w]([A-Z])/g,s=>s[0]+"-"+s[1]).toLowerCase(),Tt=(n,s="")=>{const t=Ct(n);return s?s+"-"+t:t},Dt=(n,s,t,i,p="")=>{const u=s[0].toUpperCase()+s.slice(1).toLowerCase();Q().includes(u)&&t!=="Collapsible"&&u!=="Sidenav"&&(n[s]=g(u).getDefaultOptions());const L=p?p+"-"+s:s,z=ft(n[s],t,i,L);if(!(Object.keys(z).length===0&&n.constructor===Object))return z},ft=(n,s,t,i="")=>Object.keys(n).reduce((p,u)=>{if(typeof n[u]=="object"&&n[u]!==null){const L=Dt(n,u,s,t,i);L&&(p[u]=L)}else if(n[u]!==null){const L="data-"+s.toLowerCase()+"-"+Tt(u,i);if(t.hasAttribute(L)){const z=t.getAttribute(L);p[u]=typeof n[u]=="number"?Number(z):z,typeof n[u]=="boolean"&&(p[u]=z==="true")}}return p},{}),Ot=(n,s)=>{const t=Object.assign({},g(n).getDefaultOptions());return ft(t,n,s)},At=()=>{document.querySelectorAll("[data-ax]").forEach(s=>{let t=s.dataset.ax;if(t=t[0].toUpperCase()+t.slice(1).toLowerCase(),!Q().includes(t)){console.error(`[Axentix] Error: ${t} component doesn't exist. 
 Did you forget to register him ?`,s);return}try{const i=g(t);new i(`#${s.id}`)}catch(i){console.error("[Axentix] Data: Unable to load "+t,i)}})},Rt=()=>{try{new Axentix.Axentix("all")}catch(n){console.error("[Axentix] Unable to auto init.",n)}};document.addEventListener("DOMContentLoaded",()=>{document.documentElement.dataset.axentix&&Rt(),At()});const vt=(...n)=>n.reduce((s,t)=>{for(let i in t)s[i]=typeof t[i]=="object"&&t[i]!==null?vt(s[i],t[i]):t[i];return s},{}),$t=(n,s,t)=>vt(g(n).getDefaultOptions(),Ot(n,t),s),w=(n,s,t)=>{const i=new CustomEvent("ax."+s,{detail:t||{},bubbles:!0});n.dispatchEvent(i)},kt=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,Pt=()=>!!window.PointerEvent&&"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>=0,Mt=()=>kt()?"touch":Pt()?"pointer":"mouse",St=n=>{const s=r.find(t=>t.type!=="Toast"&&"#"+t.instance.el.id===n);return s?s.instance:!1};class Nt{constructor(){K(this,"el")}removeListeners(){}setupListeners(){}setup(){}preventDbInstance(s){if(s&&St(s))throw new Error(`Instance already exist on ${s}`)}sync(){w(this.el,"component.sync"),this.removeListeners(),this.setupListeners()}reset(){w(this.el,"component.reset"),this.removeListeners(),this.setup()}destroy(){w(this.el,"component.destroy"),this.removeListeners();const s=r.findIndex(t=>t.instance.el.id===this.el.id);r.splice(s,1)}}const Xt={animationDuration:500,height:"",backToOpposite:!0,enableTouch:!0,indicators:{enabled:!1,isFlat:!1,customClasses:""},autoplay:{enabled:!0,interval:5e3,side:"right"}};class at extends Nt{constructor(t,i){super();a(this,V);a(this,_);a(this,B);a(this,y);a(this,q);a(this,j);a(this,tt);a(this,et);a(this,it);a(this,st);a(this,W);a(this,Z);a(this,G);a(this,F);a(this,J);K(this,"options");K(this,"activeIndex");a(this,C,0);a(this,b,!1);a(this,d,void 0);a(this,T,0);a(this,S,0);a(this,D,!1);a(this,N,!1);a(this,O,!1);a(this,x,0);a(this,X,0);a(this,A,void 0);a(this,E,void 0);a(this,I,void 0);a(this,R,void 0);a(this,$,void 0);a(this,k,void 0);a(this,P,void 0);a(this,m,void 0);a(this,H,0);a(this,U,0);a(this,v,void 0);a(this,Y,void 0);a(this,f,void 0);try{this.preventDbInstance(t),r.push({type:"Caroulix",instance:this}),this.el=document.querySelector(t),this.options=$t("Caroulix",i,this.el),this.setup()}catch(p){console.error("[Axentix] Caroulix init error",p)}}setup(){w(this.el,"caroulix.setup"),this.options.autoplay.side=this.options.autoplay.side.toLowerCase(),["right","left"].includes(this.options.autoplay.side)||(this.options.autoplay.side="right"),this.activeIndex=0,o(this,C,0),o(this,b,!1),o(this,f,Mt()),o(this,d,h(this,V,xt).call(this)),this.options.indicators.enabled&&h(this,it,bt).call(this);const i=this.el.querySelector(".active");i?this.activeIndex=e(this,d).indexOf(i):e(this,d)[0].classList.add("active"),h(this,_,gt).call(this),e(this,T)===0&&h(this,q,nt).call(this),this.setupListeners(),this.options.autoplay.enabled&&this.play()}setupListeners(){o(this,A,h(this,q,nt).bind(this)),window.addEventListener("resize",e(this,A)),e(this,I)&&(o(this,R,this.next.bind(this,1)),e(this,I).addEventListener("click",e(this,R))),e(this,E)&&(o(this,$,this.prev.bind(this,1)),e(this,E).addEventListener("click",e(this,$))),this.options.enableTouch&&(o(this,k,h(this,j,mt).bind(this)),o(this,P,h(this,tt,yt).bind(this)),o(this,m,h(this,et,Lt).bind(this)),this.el.addEventListener(`${e(this,f)}${e(this,f)==="touch"?"start":"down"}`,e(this,k)),this.el.addEventListener(`${e(this,f)}move`,e(this,P)),this.el.addEventListener(`${e(this,f)}${e(this,f)==="touch"?"end":"up"}`,e(this,m)),this.el.addEventListener(e(this,f)==="pointer"?"pointerleave":"mouseleave",e(this,m)))}removeListeners(){window.removeEventListener("resize",e(this,A)),o(this,A,void 0),e(this,I)&&(e(this,I).removeEventListener("click",e(this,R)),o(this,R,void 0)),e(this,E)&&(e(this,E).removeEventListener("click",e(this,$)),o(this,$,void 0)),this.options.enableTouch&&(this.el.removeEventListener(`${e(this,f)}${e(this,f)==="pointer"?"down":"start"}`,e(this,k)),this.el.removeEventListener(`${e(this,f)}move`,e(this,P)),this.el.removeEventListener(`${e(this,f)}${e(this,f)==="touch"?"end":"up"}`,e(this,m)),this.el.removeEventListener(e(this,f)==="pointer"?"pointerleave":"mouseleave",e(this,m)),o(this,k,void 0),o(this,P,void 0),o(this,m,void 0))}goTo(t){if(t===this.activeIndex)return;(t>this.activeIndex?"right":"left")==="left"?this.prev(Math.abs(this.activeIndex-t)):this.next(Math.abs(this.activeIndex-t)),this.options.indicators.enabled&&h(this,W,ct).call(this)}play(){!this.options.autoplay.enabled||(this.stop(),o(this,Y,setInterval(()=>{this.options.autoplay.side==="right"?this.next(1,!1):this.prev(1,!1)},this.options.autoplay.interval)))}stop(){!this.options.autoplay.enabled||clearInterval(e(this,Y))}next(t=1,i=!0){e(this,D)||this.activeIndex===e(this,d).length-1&&!this.options.backToOpposite||(w(this.el,"caroulix.next",{step:t}),o(this,b,!0),i&&this.options.autoplay.enabled&&this.stop(),this.activeIndex<e(this,d).length-1?this.activeIndex+=t:this.options.backToOpposite&&(this.activeIndex=0),h(this,J,pt).call(this),h(this,y,M).call(this),i&&this.options.autoplay.enabled&&this.play())}prev(t=1,i=!0){e(this,D)||this.activeIndex===0&&!this.options.backToOpposite||(w(this.el,"caroulix.prev",{step:t}),o(this,b,!0),i&&this.options.autoplay.enabled&&this.stop(),this.activeIndex>0?this.activeIndex-=t:this.options.backToOpposite&&(this.activeIndex=e(this,d).length-1),h(this,J,pt).call(this),h(this,y,M).call(this),i&&this.options.autoplay.enabled&&this.play())}}return C=new WeakMap,b=new WeakMap,d=new WeakMap,T=new WeakMap,S=new WeakMap,D=new WeakMap,N=new WeakMap,O=new WeakMap,x=new WeakMap,X=new WeakMap,A=new WeakMap,E=new WeakMap,I=new WeakMap,R=new WeakMap,$=new WeakMap,k=new WeakMap,P=new WeakMap,m=new WeakMap,H=new WeakMap,U=new WeakMap,v=new WeakMap,Y=new WeakMap,f=new WeakMap,V=new WeakSet,xt=function(){return Array.from(this.el.children).reduce((t,i)=>(i.classList.contains("caroulix-item")&&t.push(i),i.classList.contains("caroulix-prev")&&o(this,E,i),i.classList.contains("caroulix-next")&&o(this,I,i),t),[])},_=new WeakSet,gt=function(){o(this,T,0),o(this,S,0),e(this,d).forEach(t=>{const i=t.querySelector("img, video");i&&(ht(this,T)._++,i.complete?h(this,B,lt).call(this,i,!0):(i.loadRef=h(this,B,lt).bind(this,i),i.addEventListener("load",i.loadRef)))})},B=new WeakSet,lt=function(t,i){ht(this,S)._++,i||(t.removeEventListener("load",t.loadRef),t.loadRef=void 0),e(this,T)==e(this,S)&&(h(this,q,nt).call(this),h(this,y,M).call(this,!0))},y=new WeakSet,M=function(t=!1){const i=this.el.getBoundingClientRect().width;e(this,d).forEach((u,L)=>{u.style.transform=`translateX(${i*L-i*this.activeIndex-e(this,C)}px)`}),this.options.indicators.enabled&&h(this,W,ct).call(this),e(this,d).find(u=>u.classList.contains("active")).classList.remove("active"),e(this,d)[this.activeIndex].classList.add("active"),setTimeout(()=>{o(this,b,!1)},this.options.animationDuration),t&&setTimeout(()=>h(this,F,ot).call(this,this.options.animationDuration),50)},q=new WeakSet,nt=function(){if(o(this,D,!0),this.el.style.transitionDuration="",this.options.autoplay.enabled&&this.play(),this.options.height)this.el.style.height=this.options.height;else{const t=e(this,d).map(p=>p.offsetHeight),i=Math.max(...t);this.el.style.height=i+"px"}h(this,y,M).call(this),setTimeout(()=>{this.el.style.transitionDuration=this.options.animationDuration+"ms",o(this,D,!1)},50)},j=new WeakSet,mt=function(t){t.target.closest(".caroulix-arrow")||t.target.closest(".caroulix-indicators")||e(this,b)||(t.type!=="touchstart"&&t.preventDefault(),this.options.autoplay.enabled&&this.stop(),h(this,F,ot).call(this,0),o(this,O,!0),o(this,N,!1),o(this,x,0),o(this,X,0),o(this,H,h(this,Z,dt).call(this,t)),o(this,U,h(this,G,ut).call(this,t)))},tt=new WeakSet,yt=function(t){if(!e(this,O)||e(this,N))return;let i=h(this,Z,dt).call(this,t),p=h(this,G,ut).call(this,t);if(o(this,x,e(this,H)-i),o(this,X,Math.abs(e(this,U)-p)),t.type==="touchmove"&&e(this,X)>Math.abs(e(this,x)))return o(this,N,!0),o(this,x,0),!1;t.cancelable&&t.preventDefault(),o(this,C,e(this,x)),h(this,y,M).call(this)},et=new WeakSet,Lt=function(t){if(!(t.target.closest(".caroulix-arrow")||t.target.closest(".caroulix-indicators"))&&(t.cancelable&&t.preventDefault(),e(this,O))){h(this,F,ot).call(this,this.options.animationDuration);let i=this.el.getBoundingClientRect().width;o(this,O,!1);const p=i*15/100;this.activeIndex!==e(this,d).length-1&&e(this,x)>p?this.next():this.activeIndex!==0&&e(this,x)<-p&&this.prev(),o(this,x,0),o(this,C,0),h(this,y,M).call(this),this.options.autoplay.enabled&&this.play()}},it=new WeakSet,bt=function(){o(this,v,document.createElement("ul")),e(this,v).classList.add("caroulix-indicators"),this.options.indicators.isFlat&&e(this,v).classList.add("caroulix-flat"),this.options.indicators.customClasses&&(e(this,v).className=`${e(this,v).className} ${this.options.indicators.customClasses}`);for(let t=0;t<e(this,d).length;t++){const i=document.createElement("li");i.triggerRef=h(this,st,Et).bind(this,t),i.addEventListener("click",i.triggerRef),e(this,v).appendChild(i)}this.el.appendChild(e(this,v))},st=new WeakSet,Et=function(t,i){i.preventDefault(),t!==this.activeIndex&&this.goTo(t)},W=new WeakSet,ct=function(){Array.from(e(this,v).children).forEach(t=>t.removeAttribute("class")),e(this,v).children[this.activeIndex].classList.add("active")},Z=new WeakSet,dt=function(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX},G=new WeakSet,ut=function(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientY:t.clientY},F=new WeakSet,ot=function(t){this.el.style.transitionDuration=t+"ms"},J=new WeakSet,pt=function(){w(this.el,"caroulix.slide",{nextElement:e(this,d)[this.activeIndex],currentElement:e(this,d)[e(this,d).findIndex(t=>t.classList.contains("active"))]})},K(at,"getDefaultOptions",()=>Xt),wt({class:at,name:"Caroulix",dataDetection:!0,autoInit:{enabled:!0,selector:".caroulix"}}),at});
